"use strict";(()=>{function I(n){document.readyState!=="loading"?n():document.addEventListener("DOMContentLoaded",n)}function u(n,t="px"){return n==null||n==="auto"?"auto":typeof n=="number"?`${n}${t}`:n}function l(n,t){let f=document.createElement(n);return t&&Object.assign(f.style,t),f}function L(n={}){let t=l("div",{position:"fixed",zIndex:String(n.zIndex??2147483647),overflow:"visible"}),f=n.anchor||"bottom-right",o=n.offsetX??20,s=n.offsetY??20;f.includes("bottom")&&(t.style.bottom=s+"px"),f.includes("top")&&(t.style.top=s+"px"),f.includes("right")&&(t.style.right=o+"px"),f.includes("left")&&(t.style.left=o+"px");let e=t.attachShadow?t.attachShadow({mode:"open"}):t;return{host:t,root:e}}function z(n){return{pin:'<svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M12 2a7 7 0 0 0-7 7c0 5.25 7 13 7 13s7-7.75 7-13a7 7 0 0 0-7-7zm0 9.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5z"/></svg>',sparkles:'<svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M5 8l2-4 2 4 4 2-4 2-2 4-2-4-4-2 4-2zm10-3l1-3 1 3 3 1-3 1-1 3-1-3-3-1 3-1zm1 9l1-2 1 2 2 1-2 1-1 2-1-2-2-1 2-1z"/></svg>',info:'<svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M11 17h2v-6h-2v6zm0-8h2V7h-2v2zm1-7C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>',bell:'<svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M12 22a2 2 0 0 0 2-2H10a2 2 0 0 0 2 2zm6-6V11a6 6 0 1 0-12 0v5l-2 2v1h16v-1l-2-2z"/></svg>'}[n]||null}function H(n,t,f){let o=t.content||{},s=t.cta||{};if(n.style.backgroundColor=t.background?.color||"#fff",n.style.color=t.text?.color||"#000",t.background?.image&&(n.style.backgroundImage=`url("${t.background.image}")`,n.style.backgroundSize=t.bgFit||"cover",n.style.backgroundPosition=t.bgPosition||"center",n.style.backgroundRepeat="no-repeat",n.style.color=t.text?.color||"#fff"),t.presentedBy){let a=l("div",{display:"flex",justifyContent:"center",alignItems:"center",gap:"8px",padding:"8px",fontSize:"12px",color:t.presentedBy.textColor||"#666",background:t.presentedBy.bgColor||"#f0f0f0"}),h=l("span");h.textContent=t.presentedBy.text||"Presented by";let b=l("img",{height:"18px"});b.src=t.presentedBy.logoUrl,a.appendChild(h),a.appendChild(b),n.appendChild(a)}let e=l("div",{display:"flex",padding:"24px 32px",gap:"24px"});e.className="yx-main-container";let d=t.eventLogoUrl?l("img",{height:"40px",marginBottom:"16px",alignSelf:"flex-start"}):null;d&&(d.src=t.eventLogoUrl);let p=o.title?l("h2",{fontSize:"28px",fontWeight:"800",margin:"0 0 12px",lineHeight:"1.2"}):null;p&&(p.textContent=o.title);let c=o.description?l("p",{fontSize:"16px",margin:"0 0 24px",opacity:"0.8"}):null;c&&(c.textContent=o.description);let i=null;if(s.text&&s.url){if(i=l("a",{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px 20px",borderRadius:"10px",textDecoration:"none",fontWeight:"600",background:s.bg,color:s.color,textAlign:"center",marginTop:"auto"}),i.href=s.url,i.target="_blank",i.rel="noopener",s.iconUrl){let a=l("img",{width:"20px",height:"20px",objectFit:"contain",display:"block"});a.src=s.iconUrl,i.appendChild(a)}else{let a=z("pin");if(a){let h=l("span",{display:"flex",alignItems:"center"});h.innerHTML=a,i.appendChild(h)}}i.appendChild(document.createTextNode(s.text))}let x=(a=[],h="card")=>{let b=l("div",{display:"flex",gap:"12px",overflowX:"auto",padding:"4px 0",scrollSnapType:"x mandatory",scrollbarWidth:"none"});return a.forEach(y=>{if(h==="card"&&y.imageUrl){let g=l("a",{display:"flex",flexDirection:"column",borderRadius:"12px",overflow:"hidden",textDecoration:"none",color:"#000",background:"#fff",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",width:"160px",minWidth:"160px",scrollSnapAlign:"start",flexShrink:"0"});g.href=y.url,g.target="_blank",g.rel="noopener";let m=l("img",{width:"100%",height:"80px",objectFit:"cover",display:"block"});m.src=y.imageUrl,g.appendChild(m);let C=l("div",{padding:"8px 12px",flexGrow:"1",display:"flex",flexDirection:"column"}),w=l("div",{fontSize:"12px",opacity:"0.7",marginBottom:"4px"});w.textContent=y.tag,C.appendChild(w);let S=l("div",{fontWeight:"600",fontSize:"14px",lineHeight:"1.4",height:"39.2px",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",webkitLineClamp:"2",webkitBoxOrient:"vertical"});S.textContent=y.title,C.appendChild(S),g.appendChild(C),b.appendChild(g)}else if(h==="partner"&&y.logoUrl){let g=l("a",{display:"inline-block",flexShrink:"0"});g.href=y.url,g.target="_blank",g.rel="noopener";let m=l("img",{height:"30px",opacity:"0.8"});m.src=y.logoUrl,g.appendChild(m),b.appendChild(g)}}),b},r=document.createDocumentFragment();if(o.cards?.length){let a=l("h3",{fontSize:"16px",fontWeight:"600",margin:"0 0 12px"});a.textContent=o.cardsTitle||"Take a look at what you can find",r.appendChild(a),r.appendChild(x(o.cards,"card"))}if(o.partners?.length){let a=l("h3",{fontSize:"16px",fontWeight:"600",margin:"20px 0 12px"});a.textContent=o.partnersTitle||"Our Partners",r.appendChild(a),r.appendChild(x(o.partners,"partner"))}if(f){let a=l("div",{display:"flex",flexDirection:"column",minWidth:"0"});d&&a.appendChild(d),p&&a.appendChild(p),c&&a.appendChild(c),a.appendChild(r),i&&a.appendChild(i),e.appendChild(a)}else{let a=l("div",{flex:"0 0 30%",display:"flex",flexDirection:"column"});a.className="yx-left-col";let h=l("div",{flex:"1 1 70%",overflow:"hidden",minWidth:"0"});h.className="yx-right-col",d&&a.appendChild(d),p&&a.appendChild(p),c&&a.appendChild(c),i&&a.appendChild(i),h.appendChild(r),e.appendChild(a),e.appendChild(h)}n.appendChild(e)}function U(n,t,f){let o=t.content||{},s=t.cta||{};n.style.backgroundColor=t.background?.color||"#0f172a",n.style.color=t.text?.color||"#fff",t.background?.image&&(n.style.backgroundImage=`url("${t.background.image}")`,n.style.backgroundSize=t.bgFit||"cover",n.style.backgroundPosition=t.bgPosition||"center",n.style.backgroundRepeat="no-repeat");let e=l("div",{position:"relative",display:"flex",alignItems:"center",gap:"16px",padding:"16px 40px 16px 24px",width:"100%",boxSizing:"border-box"});e.classList.add("yx-banner-inner");let d=l("div",{flex:"1 1 30%"});if(d.classList.add("yx-title-col"),o.title){let i=l("div",{fontWeight:"600",fontSize:"20px",lineHeight:"1.3"});i.classList.add("yx-title-text"),i.textContent=o.title,d.appendChild(i)}e.appendChild(d);let p=l("div",{flex:"1 1 45%"});if(p.classList.add("yx-description-col"),o.description){let i=l("div",{fontSize:"15px",opacity:"0.85",lineHeight:"1.4"});i.textContent=o.description,p.appendChild(i)}e.appendChild(p);let c=l("div",{flex:"0 0 auto",display:"flex",justifyContent:"flex-end"});if(s.text&&s.url){let i=l("a",{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",background:s.bg||"#c95624",color:s.color||"#fff",padding:"12px 18px",borderRadius:"10px",textDecoration:"none",fontWeight:"600",whiteSpace:"nowrap"});if(i.classList.add("yx-cta-btn"),i.href=s.url,i.target="_blank",i.rel="noopener",s.iconUrl){let x=l("img",{width:"20px",height:"20px",objectFit:"contain",display:"block"});x.src=s.iconUrl,i.appendChild(x)}else{let x=z("pin");if(x){let r=l("span",{display:"flex",alignItems:"center"});r.innerHTML=x,i.appendChild(r)}}i.appendChild(document.createTextNode(s.text)),c.appendChild(i)}e.appendChild(c),n.appendChild(e)}function B({anchorEl:n,banner:t={},onClose:f,overlayZBase:o=2147483647,placementMode:s="side"}){let e=u(t.size?.maxW??800),d=t.size?.minH??"auto",p=s==="center",c=p?"center bottom":s==="below"?"center top":"right center",i=p?"translate(-50%, 20px)":"scale(0.95)",x=p?"translate(-50%, 0)":"scale(1)",r=l("div",{position:"fixed",width:`min(92vw, ${e})`,maxHeight:"90vh",overflowY:p?"visible":"hidden",minHeight:u(d),zIndex:String(o+1),borderRadius:u(t.radius??16),fontFamily:"system-ui, sans-serif",boxSizing:"border-box",boxShadow:"0 12px 36px rgba(0,0,0,.25)",transform:i,opacity:"0",transformOrigin:c,transition:"transform .3s cubic-bezier(.2,.8,.2,1), opacity .3s ease"});r.classList.add("yx-panel");let a=window.screen.width<=768;a&&r.classList.add("yx-mobile");let h=l("style");h.textContent=`
    .yx-panel.yx-mobile .yx-title-col { flex-basis: 70% !important; }
    .yx-panel.yx-mobile .yx-description-col { display: none !important; }
    .yx-panel.yx-mobile .yx-title-text { font-size: 18px !important; line-height: 1.1 !important; }
    .yx-panel.yx-mobile .yx-banner-inner { gap: 10px !important; padding: 12px 10px 12px 16px !important; }
    .yx-panel.yx-mobile .yx-cta-btn { padding: 8px 12px !important; font-size: 14px !important; min-width: 100px; justify-content: center; }
    .yx-panel.yx-mobile .yx-cta-btn span { display: none !important; }
    .yx-panel.yx-mobile .yx-main-container { padding: 24px 15px !important; }
    .yx-panel.yx-mobile h2 { font-size: 24px !important; }
  `,r.appendChild(h);function b(){n&&(window.removeEventListener("scroll",g,!0),window.removeEventListener("resize",g)),r.style.transform=i,r.style.opacity="0",r.addEventListener("transitionend",()=>{r.remove(),f&&f()},{once:!0})}let y;p?y=l("button",{position:"absolute",bottom:"100%",left:"0",marginBottom:"8px",width:"30px",height:"30px",borderRadius:"50%",border:"0",background:"#000",color:"#fff",fontSize:"20px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"100",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"}):y=l("button",{position:"absolute",top:"10px",right:"10px",border:"0",background:"transparent",color:t.closeButtonColor||"inherit",fontSize:"24px",cursor:"pointer",lineHeight:"1",zIndex:"100"}),y.setAttribute("aria-label","Close"),y.textContent="\xD7",y.addEventListener("click",b),r.appendChild(y),t.layout==="detailed"?H(r,t,a):U(r,t),document.body.appendChild(r),p?(r.style.left="50%",r.style.bottom="20px"):(g(),window.addEventListener("scroll",g,{passive:!0,capture:!0}),window.addEventListener("resize",g));function g(){if(!n)return;let m=n.getBoundingClientRect(),C=r.offsetWidth,w=r.offsetHeight,S=t.offset??10,k,v;s==="below"?(k=m.bottom+S,(t.inlineAlign||"left")==="right"?v=m.right-C:v=m.left):(k=m.top+(m.height-w)/2,v=m.right-C-S),k=Math.max(8,Math.min(k,window.innerHeight-w-8)),v=Math.max(8,Math.min(v,window.innerWidth-C-8)),r.style.top=Math.round(k)+"px",r.style.left=Math.round(v)+"px"}return requestAnimationFrame(()=>{r.style.transform=x,r.style.opacity="1"}),{close:b,panel:r}}function E(n,t,f){let o=t.trigger||{},s=f.installMode==="floating",e=l("button");if(e.setAttribute("aria-label",o.ariaLabel||o.text||"Open widget"),e.style.border="0",e.style.cursor="pointer",e.style.fontWeight=String(o.weight??600),e.style.background=o.colors?.bg||"#111",e.style.color=o.colors?.fg||"#fff",e.style.transition="background .2s ease, transform .2s ease, opacity .2s ease",e.style.display="inline-flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.gap=o.iconOnly?"0":"8px",e.style.boxShadow="0 4px 12px rgba(0,0,0,.15)",o.colors?.hover&&(e.addEventListener("mouseenter",()=>e.style.background=o.colors.hover),e.addEventListener("mouseleave",()=>e.style.background=o.colors.bg||"#111")),s){let c=o.iconOnly?56:"auto",i=u(o.size?.w??c),x=u(o.size?.h??56);e.style.width=i,e.style.height=x;let r=o.iconOnly?"50%":"30px";e.style.borderRadius=u(o.radius??r),e.style.padding=o.iconOnly?"0":"0 24px"}else{let c=o.inline||{},i=c.size||{};e.style.width=u(i.w??180),e.style.height=u(i.h??44),e.style.fontSize=c.fontSize||"inherit",e.style.borderRadius=u(o.radius??12),e.style.padding="0 16px"}let d;if(o.iconUrl)d=l("img",{width:"24px",height:"24px",objectFit:"contain",display:"block"}),d.src=o.iconUrl;else if(o.iconSvg)d=l("span",{width:"20px",height:"20px",display:"flex",alignItems:"center"}),d.innerHTML=o.iconSvg;else if(o.iconName){let c=z(o.iconName);c&&(d=l("span",{width:"20px",height:"20px",display:"flex",alignItems:"center",color:o.iconColor||"currentColor"}),d.innerHTML=c)}else o.icon&&(d=l("span",{color:o.iconColor||"currentColor",fontSize:"18px",lineHeight:"1"}),d.textContent=o.icon);d&&e.appendChild(d),o.iconOnly||e.appendChild(document.createTextNode(o.text||"Click")),n.appendChild(e);let p=null;e.addEventListener("click",()=>{if(p){p.close();return}let c=f.hostEl,i=2147483647;if(c){let x=parseInt(getComputedStyle(c).zIndex||"0",10);Number.isFinite(x)&&(i=x)}s&&(e.style.transform="scale(0.9)",e.style.opacity="0",e.style.pointerEvents="none"),p=B({anchorEl:s?c:e,banner:t.banner||{},overlayZBase:i,placementMode:s?"side":"below",onClose:()=>{s&&(e.style.transform="scale(1)",e.style.opacity="1",e.style.pointerEvents=""),p=null}})})}async function M(n){let t=n.dataset.widgetId;if(!t)return;let f=n.getAttribute("src"),o=f?new URL(f,document.baseURI).origin:location.origin||"",s=n.dataset.apiBase||o,e;try{let r=await fetch(`${s}/api/widget/${encodeURIComponent(t)}`,{cache:"no-store"});if(!r.ok){try{console.error("[loader] fetch failed",r.status,await r.text())}catch{}return}e=await r.json()}catch(r){console.error("[loader] network error",r);return}let d=e?.config??e,p=e?.type??d?.type??"composite",c=d?.install?.mode||"inline";if(c==="modal"){B({anchorEl:null,banner:d.banner||{},placementMode:"center"});return}let i,x;if(c==="floating"?{host:i,root:x}=L(d.install):(i=document.createElement("div"),i.style.display="inline-block",x=i.attachShadow?i.attachShadow({mode:"open"}):i),n.parentNode.insertBefore(i,n.nextSibling),(p==="composite"||p==="button")&&E(x,{...d,_slug:t},{installMode:c,hostEl:i}),d?.analytics?.url)try{navigator.sendBeacon?.(d.analytics.url,JSON.stringify({e:"impression",id:t}))}catch{}}I(()=>{document.querySelectorAll('script[src*="loader.v1.js"][data-widget-id]').forEach(M)});})();
